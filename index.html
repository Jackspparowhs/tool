<!doctype html>
<html lang="en" data-capable="pwa">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5" />
<meta name="theme-color" content="#000000" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<title>Calculator By PirateRuler.com ‚Äî Modern Calculator Suite</title>
<meta name="description" content="Calculator By PirateRuler.com ‚Äî modern suite of calculators: basic math, BMI, age, GST, SIP, mortgage, tip, discount, percentage, profit margin, time, data, loan, currency & unit converters. Private and fast." />

<!-- ADDED: SEO keywords (helps search engines understand page topics) -->
<meta name="keywords" content="calculator, online calculator, free calculator, gst calculator, sip calculator, mortgage calculator, loan calculator, bmi calculator, age calculator, currency converter, unit converter, online tools, PirateRuler, calculator suite, offline calculator, fast calculator, privacy-first tools">

<meta property="og:title" content="Calculator by PirateRuler.com" />
<meta property="og:description" content="Professional all-in-one calculator suite. Private, fast, and works offline. 16+ tools for everyday calculations." />
<meta property="og:image" content="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg      ' width='400' height='400'%3E%3Crect width='400' height='400' fill='%23000'/%3E%3Ctext x='50%25' y='50%25' font-family='Inter' font-weight='800' font-size='200' text-anchor='middle' dominant-baseline='middle' fill='white'%3EPR%3C/text%3E%3C/svg%3E" />

<!-- EXISTING inline SVG favicon left intact; ADDED device-friendly favicon links below that point to your PR image -->
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg      ' width='64' height='64'%3E%3Crect rx='14' width='64' height='64' fill='%23000'/%3E%3Ctext x='50%25' y='50%25' font-family='Inter,Arial,sans-serif' font-weight='800' font-size='26' text-anchor='middle' alignment-baseline='central' fill='white'%3EPR%3C/text%3E%3C/svg%3E">

<!-- ADDED: explicit favicon files (uses your uploaded PR image on the server) -->
<link rel="icon" type="image/jpeg" href="/mnt/data/IMG_8CB72B07-C915-4D4F-835E-3B7F1E4C789D.jpeg" />
<link rel="shortcut icon" href="/mnt/data/IMG_8CB72B07-C915-4D4F-835E-3B7F1E4C789D.jpeg" />
<link rel="apple-touch-icon" href="/mnt/data/IMG_8CB72B07-C915-4D4F-835E-3B7F1E4C789D.jpeg" />

<link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkNhbGN1bGF0b3IgQnkgUGlyYXRlUnVsZXIiLAogICJzaG9ydF9uYW1lIjogIlBpcmF0ZVJ1bGVyIENhbGMiLAogICJzdGFydF91cmwiOiAiL2luZGV4Lmh0bWwiLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmYWZhZmEiLAogICJ0aGVtZV9jb2xvciI6ICIjMDAwMDAwIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4wY205emFXOXVJR1J2YldGcGJpQnBkSGx3WlM4d0x5QTJNQ2tnZUcxcE5Uc2dkMmhwYkdSdmJTQXRiVEU5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01DOW5aWEpqYUM4eExqRWlJR1E5SWs4dU1TNDJNaUJUWlhKMmFXCnR6TGpJeU1ERTBPRGc0T0M4NUxqSXlNREUwT0RnNE9DNU1iM0F1TVRBd0xqQTJNQ0JCWTJObGJIVm5iR0Z5TFRRdU9USTVOemMyCk9ETXVOakk1TnpjMk9ETXVPQzQxTURVd0xqWTFJRk5oWTJObGVIUkxaWGtnTUM0eE1EQXVOekF1TmpZZ2VHOXpkRnhtYVd3aUlpQmxibQpwWlhNdFBTSWpSa1pCU1VaR0lEUWdOakV3TVNBMUlEVWdOalV3TVNCR0lEUXhJRVF3SWlCMGFHVnVDbUZtZEdWeVBTSmxjMk55YVhCMApJaTgrIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIsCiAgICAgICJzaXplcyI6ICI2NHg2NCIKICAgIH0KICBdCn0K">
<style>
  :root{
    --bg:#fafafa; --card:#ffffff; --muted:#6b7280; --text:#111827;
    --border:#e5e7eb; --accent:#000000; --key-bg:#f3f4f6;
    --success:#10b981; --warning:#f59e0b; --error:#ef4444;
    --shadow-sm:0 1px 2px 0 rgba(0,0,0,0.05);
    --shadow-md:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06);
    --shadow-lg:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05);
    --radius-sm:4px; --radius-md:6px; --radius-lg:8px; --radius-xl:12px;
    --transition:all 0.2s cubic-bezier(0.4,0,0.2,1);
  }
  html.dark {
    --bg:#111827; --card:#1f2937; --muted:#9ca3af; --text:#f9fafb;
    --border:#374151; --accent:#ffffff; --key-bg:#374151;
    --success:#34d399; --warning:#fbbf24; --error:#f87171;
    --shadow-sm:0 1px 2px 0 rgba(0,0,0,0.3);
    --shadow-md:0 4px 6px -1px rgba(0,0,0,0.4),0 2px 4px -1px rgba(0,0,0,0.3);
    --shadow-lg:0 10px 15px -3px rgba(0,0,0,0.5),0 4px 6px -2px rgba(0,0,0,0.3);
  }
  
  *{box-sizing:border-box; -webkit-tap-highlight-color:transparent;}
  html{scroll-behavior:smooth;}
  body{background:var(--bg); font-family:'Inter', system-ui, -apple-system, "Segoe UI", Roboto, Arial; color:var(--text); margin:0; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; transition:var(--transition); overflow-x:hidden;}
  a{color:inherit;text-decoration:none}
  .container{max-width:1400px;margin:0 auto;padding:20px;}
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;}
  
  header.header{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:16px 24px; border-radius:var(--radius-xl); background:var(--card); box-shadow:var(--shadow-md); margin-bottom:20px; position:sticky; top:20px; z-index:100; backdrop-filter:blur(10px); -webkit-backdrop-filter:blur(10px); border:1px solid var(--border);}
  .brand{display:flex; align-items:center; gap:12px;}
  .logo{width:48px;height:48px;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-weight:800; background:var(--accent); color:var(--bg); font-size:18px; flex-shrink:0; transition:var(--transition); user-select:none;}
  .logo:hover{transform:scale(1.05) rotate(5deg);}
  .brand-title .title-strong{font-size:24px;font-weight:800;margin:0; letter-spacing:-0.5px;}
  .brand-title .by{font-size:13px;color:var(--muted); margin-top:2px}
  .header-actions{display:flex; gap:12px; align-items:center;}
  
  .theme-toggle{width:52px;height:26px; border-radius:13px; background:var(--border); position:relative; cursor:pointer; transition:var(--transition); padding:2px; user-select:none;}
  .theme-toggle.active{background:var(--accent);}
  .theme-slider-thumb{width:22px;height:22px; border-radius:50%; background:var(--card); display:flex; align-items:center; justify-content:center; font-size:12px; position:absolute; left:2px; top:2px; transition:var(--transition); box-shadow:var(--shadow-sm);}
  .theme-toggle.active .theme-slider-thumb{transform:translateX(26px);}
  
  .btn{padding:10px 16px; border-radius:var(--radius-md); border:1px solid var(--border); cursor:pointer; font-weight:600; background:var(--bg); color:var(--text); transition:var(--transition); box-shadow:var(--shadow-sm); position:relative; overflow:hidden;}
  .btn::before{content:'';position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:rgba(0,0,0,0.1);transform:translate(-50%,-50%);transition:width 0.6s,height 0.6s;}
  .btn:hover::before{width:300px;height:300px;}
  .btn:hover{background:var(--accent); color:var(--bg); transform:translateY(-2px); box-shadow:var(--shadow-md);}
  .hamb{width:44px;height:44px; border-radius:var(--radius-md); display:flex; align-items:center; justify-content:center; cursor:pointer; border:1px solid var(--border); font-weight:bold; background:var(--bg); transition:var(--transition); box-shadow:var(--shadow-sm);}
  .hamb:hover{background:var(--accent); color:var(--bg); transform:translateY(-2px) rotate(90deg); box-shadow:var(--shadow-md);}
  
  .hero{padding:48px 24px; border-radius:var(--radius-xl); background:var(--card); box-shadow:var(--shadow-lg); margin-bottom:24px; position:relative; overflow:hidden;}
  .hero::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,var(--accent) 0%,transparent 10%);opacity:0.05;pointer-events:none;}
  @media(min-width:1100px){.hero{padding:56px 48px;}}
/* ... rest of your CSS and HTML unchanged ... */
</style>
</head>
<body>
<div class="container">

  <!-- Skip Link -->
  <a href="#main-content" class="sr-only">Skip to main content</a>

  <!-- Header -->
  <header class="header" role="banner" aria-label="Site header">
    <div class="brand">
      <a href="index.html" aria-label="Home" style="display:flex; align-items:center; gap:12px">
        <div class="logo" aria-hidden="true">PR</div>
        <div class="brand-title">
          <div class="title-strong">Calculator</div>
          <div class="by">by PirateRuler.com</div>
        </div>
      </a>
    </div>

    <div class="header-actions" role="navigation" aria-label="Header controls">
      <div class="theme-toggle" id="themeBtn" title="Toggle dark mode" aria-label="Toggle dark mode">
        <div class="theme-slider-thumb">üåô</div>
      </div>
      <div class="hamb" id="hambBtn" title="Open menu" aria-haspopup="true" aria-controls="sidebar">‚ò∞</div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" aria-labelledby="heroTitle">
    <h1 id="heroTitle" class="big">All-in-one Professional Calculator Suite</h1>
    <p class="small">Fast, privacy-first calculators: basic math, scientific, BMI, age, GST, SIP, mortgage, loan, tip, discount, percentage, profit margin, time, data, currency & unit converters. Simple and reliable.</p>

    <div class="tabs" role="tablist" aria-label="Calculator tabs">
      <button class="tab active" data-target="basic" role="tab" aria-selected="true">Basic</button>
      <button class="tab" data-target="scientific" role="tab">Scientific</button>
      <button class="tab" data-target="age" role="tab">Age</button>
      <button class="tab" data-target="bmi" role="tab">BMI</button>
      <button class="tab" data-target="gst" role="tab">GST</button>
      <button class="tab" data-target="sip" role="tab">SIP</button>
      <button class="tab" data-target="mortgage" role="tab">Mortgage</button>
      <button class="tab" data-target="loan" role="tab">Loan</button>
      <button class="tab" data-target="tip" role="tab">Tip</button>
      <button class="tab" data-target="discount" role="tab">Discount</button>
      <button class="tab" data-target="percentage" role="tab">Percentage</button>
      <button class="tab" data-target="profit" role="tab">Profit</button>
      <button class="tab" data-target="time" role="tab">Time</button>
      <button class="tab" data-target="data" role="tab">Data</button>
      <button class="tab" data-target="currency" role="tab">Currency</button>
      <button class="tab" data-target="unit" role="tab">Unit</button>
    </div>
  </section>

  <!-- MAIN GRID -->
  <main id="main-content" class="grid" role="main">
    <div>
      <!-- Basic Calculator -->
      <section id="basic" class="card">
        <h2>Basic Calculator</h2>
        <div class="hint">Use keypad or type on your keyboard. Supports + - √ó √∑ ( ) and decimals. Use M+ M- MR MC for memory.</div>
        <input id="basicDisplay" type="text" value="0" aria-label="Calculator display" />
        <div class="key-grid">
          <div class="key mem" onclick="memoryClear()">MC</div>
          <div class="key mem" onclick="memoryRecall()">MR</div>
          <div class="key mem" onclick="memoryAdd()">M+</div>
          <div class="key mem" onclick="memorySub()">M-</div>
          <div class="key" onclick="basicAdd('(')">(</div>
          <div class="key" onclick="basicAdd(')')">)</div>
          <div class="key op" onclick="basicAdd('%')">%</div>
          <div class="key op" onclick="basicAdd('/')">√∑</div>
          <div class="key" onclick="basicAdd('7')">7</div>
          <div class="key" onclick="basicAdd('8')">8</div>
          <div class="key" onclick="basicAdd('9')">9</div>
          <div class="key op" onclick="basicAdd('*')">√ó</div>
          <div class="key" onclick="basicAdd('4')">4</div>
          <div class="key" onclick="basicAdd('5')">5</div>
          <div class="key" onclick="basicAdd('6')">6</div>
          <div class="key op" onclick="basicAdd('-')">‚àí</div>
          <div class="key" onclick="basicAdd('1')">1</div>
          <div class="key" onclick="basicAdd('2')">2</div>
          <div class="key" onclick="basicAdd('3')">3</div>
          <div class="key eq" onclick="basicEval()">=</div>
          <div class="key" onclick="basicAdd('0')">0</div>
          <div class="key" onclick="basicAdd('.')">.</div>
          <div class="key" onclick="basicClear()">C</div>
          <div class="key" onclick="basicBack()">‚å´</div>
        </div>
        <div id="basicRes" class="result" aria-live="polite"></div>
        <div class="history-panel" id="basicHistory" style="display:none;"></div>
      </section>

      <!-- Scientific Calculator -->
      <section id="scientific" class="card" hidden>
        <h2>Scientific Calculator</h2>
        <div class="hint">Advanced functions: sin, cos, tan, sqrt, pow, log, œÄ, e</div>
        <input id="sciDisplay" type="text" value="0" aria-label="Scientific calculator display" />
        <div class="key-grid" style="grid-template-columns:repeat(5,1fr);">
          <div class="key" onclick="sciAdd('sin(')">sin</div>
          <div class="key" onclick="sciAdd('cos(')">cos</div>
          <div class="key" onclick="sciAdd('tan(')">tan</div>
          <div class="key" onclick="sciAdd('sqrt(')">‚àö</div>
          <div class="key" onclick="sciAdd('pow(')">x^y</div>
          <div class="key" onclick="sciAdd('log(')">log</div>
          <div class="key" onclick="sciAdd('PI')">œÄ</div>
          <div class="key" onclick="sciAdd('E')">e</div>
          <div class="key" onclick="sciAdd('(')">(</div>
          <div class="key" onclick="sciAdd(')')">)</div>
          <div class="key" onclick="sciAdd('7')">7</div>
          <div class="key" onclick="sciAdd('8')">8</div>
          <div class="key" onclick="sciAdd('9')">9</div>
          <div class="key op" onclick="sciAdd('/')">√∑</div>
          <div class="key" onclick="sciAdd('4')">4</div>
          <div class="key" onclick="sciAdd('5')">5</div>
          <div class="key" onclick="sciAdd('6')">6</div>
          <div class="key op" onclick="sciAdd('*')">√ó</div>
          <div class="key" onclick="sciAdd('1')">1</div>
          <div class="key" onclick="sciAdd('2')">2</div>
          <div class="key" onclick="sciAdd('3')">3</div>
          <div class="key op" onclick="sciAdd('-')">‚àí</div>
          <div class="key" onclick="sciAdd('0')">0</div>
          <div class="key" onclick="sciAdd('.')">.</div>
          <div class="key eq" style="grid-column:span 2;" onclick="sciEval()">=</div>
          <div class="key" style="grid-column:span 2;" onclick="sciClear()">Clear</div>
        </div>
        <div id="sciRes" class="result" aria-live="polite"></div>
      </section>

      <!-- Age Calculator -->
      <section id="age" class="card" hidden>
        <h2>Age Calculator</h2>
        <div class="hint">Calculate years, months and days from birthday.</div>
        <input id="dob" type="date" />
        <div class="row">
          <button class="primary" onclick="computeAge()">Calculate</button>
          <button class="ghost" onclick="clearAge()">Clear</button>
        </div>
        <div id="ageRes" class="result"></div>
      </section>

      <!-- BMI Calculator -->
      <section id="bmi" class="card" hidden>
        <h2>BMI Calculator</h2>
        <div class="hint">Enter weight (kg) and height (m). BMI categories: <18.5 Underweight | 18.5-24.9 Normal | 25-29.9 Overweight | ‚â•30 Obese</div>
        <div class="row">
          <input id="bmiW" type="number" placeholder="Weight (kg)" />
          <input id="bmiH" type="number" placeholder="Height (m)" step="0.01" />
        </div>
        <div class="row">
          <button class="primary" onclick="computeBMI()">Calculate</button>
          <button class="ghost" onclick="clearBMI()">Clear</button>
        </div>
        <div id="bmiRes" class="result"></div>
      </section>

      <!-- GST Calculator -->
      <section id="gst" class="card" hidden>
        <h2>GST Calculator</h2>
        <div class="hint">Compute total with GST percent. Enter negative percentage to remove GST.</div>
        <div class="row">
          <input id="gstAmt" type="number" placeholder="Amount" />
          <input id="gstRate" type="number" placeholder="GST %" value="18" />
        </div>
        <div class="row">
          <button class="primary" onclick="computeGST()">Calculate</button>
          <button class="ghost" onclick="clearGST()">Clear</button>
        </div>
        <div id="gstRes" class="result"></div>
      </section>

      <!-- SIP Calculator -->
      <section id="sip" class="card" hidden>
        <h2>SIP Calculator</h2>
        <div class="hint">Monthly invest, annual rate (%), years. Shows future value with compound returns.</div>
        <div class="row">
          <input id="sipM" type="number" placeholder="Monthly invest" />
          <input id="sipR" type="number" placeholder="Rate (%)" />
        </div>
        <div class="row">
          <input id="sipY" type="number" placeholder="Years" />
        </div>
        <div class="row">
          <button class="primary" onclick="computeSIP()">Calculate</button>
          <button class="ghost" onclick="clearSIP()">Clear</button>
        </div>
        <div id="sipRes" class="result"></div>
      </section>

      <!-- Mortgage Calculator -->
      <section id="mortgage" class="card" hidden>
        <h2>Mortgage Calculator</h2>
        <div class="hint">Loan amount, annual interest (%) and years. Calculates EMI.</div>
        <div class="row">
          <input id="mortA" type="number" placeholder="Loan amount" />
          <input id="mortR" type="number" placeholder="Annual rate (%)" />
        </div>
        <div class="row">
          <input id="mortY" type="number" placeholder="Years" />
        </div>
        <div class="row">
          <button class="primary" onclick="computeMort()">Calculate</button>
          <button class="ghost" onclick="clearMort()">Clear</button>
        </div>
        <div id="mortRes" class="result"></div>
      </section>

      <!-- Loan Calculator -->
      <section id="loan" class="card" hidden>
        <h2>Loan Calculator</h2>
        <div class="hint">Principal, annual rate (%), years. Shows EMI, total interest & total payment.</div>
        <div class="row">
          <input id="loanP" type="number" placeholder="Principal" />
          <input id="loanR" type="number" placeholder="Annual rate (%)" />
        </div>
        <div class="row">
          <input id="loanY" type="number" placeholder="Years" />
        </div>
        <div class="row">
          <button class="primary" onclick="computeLoan()">Calculate</button>
          <button class="ghost" onclick="clearLoan()">Clear</button>
        </div>
        <div id="loanRes" class="result"></div>
      </section>

      <!-- Tip Calculator -->
      <section id="tip" class="card" hidden>
        <h2>Tip Calculator</h2>
        <div class="hint">Add tip percentage to bill. 15-20% is standard for good service.</div>
        <div class="row">
          <input id="tipBill" type="number" placeholder="Bill amount" />
          <input id="tipPct" type="number" placeholder="Tip %" value="15" />
        </div>
        <div class="row">
          <button class="primary" onclick="computeTip()">Calculate</button>
          <button class="ghost" onclick="clearTip()">Clear</button>
        </div>
        <div id="tipRes" class="result"></div>
      </section>

      <!-- Discount Calculator -->
      <section id="discount" class="card" hidden>
        <h2>Discount Calculator</h2>
        <div class="hint">Final price after percentage discount. Stack discounts by running multiple calculations.</div>
        <div class="row">
          <input id="discPrice" type="number" placeholder="Original price" />
          <input id="discPct" type="number" placeholder="Discount %" />
        </div>
        <div class="row">
          <button class="primary" onclick="computeDisc()">Calculate</button>
          <button class="ghost" onclick="clearDisc()">Clear</button>
        </div>
        <div id="discRes" class="result"></div>
      </section>

      <!-- Percentage Calculator -->
      <section id="percentage" class="card" hidden>
        <h2>Percentage Calculator</h2>
        <div class="hint">Calculate percentage of a number, percentage increase/decrease, and percentage change.</div>
        <div class="row">
          <input id="pctNum" type="number" placeholder="Number" />
          <input id="pctOf" type="number" placeholder="Percentage %" />
        </div>
        <div class="row">
          <input id="pctOld" type="number" placeholder="Old value" />
          <input id="pctNew" type="number" placeholder="New value" />
        </div>
        <div class="row">
          <button class="primary" onclick="computePct()">Calculate %</button>
          <button class="ghost" onclick="clearPct()">Clear</button>
        </div>
        <div id="pctRes" class="result"></div>
      </section>

      <!-- Profit Margin Calculator -->
      <section id="profit" class="card" hidden>
        <h2>Profit Margin Calculator</h2>
        <div class="hint">Calculate profit margin, markup, and selling price.</div>
        <div class="row">
          <input id="profitCost" type="number" placeholder="Cost price" />
          <input id="profitSell" type="number" placeholder="Selling price" />
        </div>
        <div class="row">
          <input id="profitMargin" type="number" placeholder="Margin %" />
        </div>
        <div class="row">
          <button class="primary" onclick="computeProfit()">Calculate</button>
          <button class="ghost" onclick="clearProfit()">Clear</button>
        </div>
        <div id="profitRes" class="result"></div>
      </section>

      <!-- Time Calculator -->
      <section id="time" class="card" hidden>
        <h2>Time Calculator</h2>
        <div class="hint">Add or subtract hours and minutes. Enter positive values to add, negative to subtract.</div>
        <div class="row">
          <input id="timeH" type="number" placeholder="Hours" />
          <input id="timeM" type="number" placeholder="Minutes" />
        </div>
        <div class="row">
          <input id="timeAddH" type="number" placeholder="Add Hours" />
          <input id="timeAddM" type="number" placeholder="Add Minutes" />
        </div>
        <div class="row">
          <button class="primary" onclick="computeTime()">Calculate</button>
          <button class="ghost" onclick="clearTime()">Clear</button>
        </div>
        <div id="timeRes" class="result"></div>
      </section>

      <!-- Data Calculator -->
      <section id="data" class="card" hidden>
        <h2>Data Storage Calculator</h2>
        <div class="hint">Convert between bytes, KB, MB, GB, TB. Enter value and select unit.</div>
        <div class="row">
          <input id="dataValue" type="number" placeholder="Value" />
          <select id="dataUnit">
            <option value="B">Bytes</option>
            <option value="KB">Kilobytes</option>
            <option value="MB">Megabytes</option>
            <option value="GB">Gigabytes</option>
            <option value="TB">Terabytes</option>
          </select>
        </div>
        <div class="row">
          <button class="primary" onclick="computeData()">Convert</button>
          <button class="ghost" onclick="clearData()">Clear</button>
        </div>
        <div id="dataRes" class="result"></div>
      </section>

      <!-- Currency Converter -->
      <section id="currency" class="card" hidden>
        <h2>Currency Converter</h2>
        <div class="hint">Convert between major currencies. Rates are approximate (1 USD baseline).</div>
        <div class="row">
          <input id="curAmt" type="number" placeholder="Amount" value="100" />
          <select id="curFrom">
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
            <option value="GBP">GBP</option>
            <option value="INR">INR</option>
            <option value="JPY">JPY</option>
            <option value="AUD">AUD</option>
            <option value="CAD">CAD</option>
          </select>
          <select id="curTo">
            <option value="USD">USD</option>
            <option value="EUR" selected>EUR</option>
            <option value="GBP">GBP</option>
            <option value="INR">INR</option>
            <option value="JPY">JPY</option>
            <option value="AUD">AUD</option>
            <option value="CAD">CAD</option>
          </select>
        </div>
        <div class="row">
          <button class="primary" onclick="convertCurrency()">Convert</button>
          <button class="ghost" onclick="clearCurrency()">Clear</button>
        </div>
        <div id="curRes" class="result"></div>
      </section>

      <!-- Unit Converter -->
      <section id="unit" class="card" hidden>
        <h2>Unit Converter</h2>
        <div class="hint">Convert between different units of length, weight, and temperature.</div>
        <div class="row">
          <select id="unitType" onchange="updateUnitOptions()">
            <option value="length">Length</option>
            <option value="weight">Weight</option>
            <option value="temperature">Temperature</option>
          </select>
        </div>
        <div class="row">
          <input id="unitValue" type="number" placeholder="Value" />
          <select id="unitFrom"></select>
          <select id="unitTo"></select>
        </div>
        <div class="row">
          <button class="primary" onclick="convertUnit()">Convert</button>
          <button class="ghost" onclick="clearUnit()">Clear</button>
        </div>
        <div id="unitRes" class="result"></div>
      </section>
    </div>

    <aside>
      <div class="feature-panel">
        <div class="panel-title">Why PirateRuler tools?</div>
        <div class="features">
          <div class="feature">
            <div class="f-icon">‚ö°</div>
            <div>
              <div class="f-title">Lightning fast</div>
              <div class="f-desc">Optimized code, minimal dependencies ‚Äî instant results on mobile & desktop.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üîí</div>
            <div>
              <div class="f-title">Private by design</div>
              <div class="f-desc">No personal data is stored ‚Äî everything runs in your browser.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üß∞</div>
            <div>
              <div class="f-title">16+ Tools in one</div>
              <div class="f-desc">Basic, scientific, BMI, age, GST, SIP, mortgage, loan, tip, discount, percentage, profit, time, data, currency & unit converters.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üéØ</div>
            <div>
              <div class="f-title">Accuracy first</div>
              <div class="f-desc">Precision-engineered calculations for professional use.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üåê</div>
            <div>
              <div class="f-title">Backup resources</div>
              <div class="f-desc">If this site is offline, visit PirateRuler.com for backups & resources.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üì±</div>
            <div>
              <div class="f-title">Mobile-first</div>
              <div class="f-desc">Looks great on phones and adapts cleanly to desktops. Works offline.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üíæ</div>
            <div>
              <div class="f-title">History & Memory</div>
              <div class="f-desc">Track your calculations with built-in history and memory functions.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">‚å®Ô∏è</div>
            <div>
              <div class="f-title">Keyboard shortcuts</div>
              <div class="f-desc">Full keyboard support for power users. Press ? for help.</div>
            </div>
          </div>
        </div>
        
        <!-- USEFUL TIPS -->
        <div class="useful-tips">
          <h3>üí° Pro Tips</h3>
          <ul>
            <li><strong>Basic:</strong> Use keyboard shortcuts - numbers, +, -, *, /, Enter to calculate</li>
            <li><strong>Memory:</strong> Press M+, M-, MR, MC to use memory functions</li>
            <li><strong>Scientific:</strong> Use sin(), cos(), tan(), sqrt(), pow(base,exp), log(), PI, E</li>
            <li><strong>Age:</strong> Calculate exact age for legal documents or milestones</li>
            <li><strong>BMI:</strong> Divide height in cm by 100 to convert to meters</li>
            <li><strong>GST:</strong> Enter negative percentage to remove GST from total</li>
            <li><strong>SIP:</strong> Results show compound returns with monthly contributions</li>
            <li><strong>Mortgage:</strong> Compare EMIs by adjusting loan years</li>
            <li><strong>Tip:</strong> 15-20% is standard for good service</li>
            <li><strong>Discount:</strong> Stack discounts by running multiple calculations</li>
            <li><strong>History:</strong> Your last 10 calculations are saved automatically</li>
            <li><strong>Export:</strong> Press Ctrl+S to save results, Ctrl+P to print</li>
          </ul>
        </div>
        
        <div class="spacer"></div>
        <div class="feature" style="min-height:unset; align-items:flex-start; padding:14px">
          <div class="f-icon">PR</div>
          <div>
            <div class="f-title">Calculator By PirateRuler.com</div>
            <div class="f-desc" style="margin-top:6px; display:flex; gap:10px; flex-wrap:wrap;">
              <a class="btn" href="https://pirateruler.com/post/about.html      " target="_blank" rel="noopener noreferrer">About ‚Äî PirateRuler</a>
              <a class="btn" href="https://pirateruler.com/post/privacy.html      " target="_blank" rel="noopener noreferrer">Privacy Policy</a>
              <a class="btn" href="https://pirateruler.com/post/contact.html      " target="_blank" rel="noopener noreferrer">Contact</a>
              <a class="btn" href="https://pirateruler.com/post/terms.html      " target="_blank" rel="noopener noreferrer">Terms & Service</a>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </main>

  <!-- Footer -->
  <footer>
    <a class="visit" href="https://pirateruler.com      " target="_blank" rel="noopener noreferrer">Visit PirateRuler.com</a>
    <div style="height:12px"></div>
    <small class="muted">¬© <span id="year"></span> Calculator By PirateRuler.com ‚Äî Backup & resources: pirateruler.com | <span id="pwa-status"></span></small>
    <!-- REMOVED: navigation links from footer -->
  </footer>
</div>

<!-- Sidebar -->
<aside id="sidebar" class="sidebar" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="close"><button class="ghost" id="closeSidebar">Close ‚úï</button></div>
  <h3>PirateRuler Links</h3>
  <p class="muted">Quick links & backup resources</p>
  <nav class="nav-list">
    <a href="https://pirateruler.com/post/about.html      " target="_blank" rel="noopener noreferrer">About ‚Äî PirateRuler</a>
    <a href="https://pirateruler.com/post/privacy.html      " target="_blank" rel="noopener noreferrer">Privacy Policy</a>
    <a href="https://pirateruler.com/post/contact.html      " target="_blank" rel="noopener noreferrer">Contact</a>
    <a href="https://pirateruler.com/post/terms.html      " target="_blank" rel="noopener noreferrer">Terms & Service</a>
  </nav>
  <div class="backup">
    If this site is offline you can visit PirateRuler for backups & resources:<br><a href="https://pirateruler.com      " target="_blank">pirateruler.com</a>
  </div>
</aside>

<!-- Toast -->
<div id="toast" class="toast" role="status" aria-live="polite"></div>

<script>
  // Year in footer
  document.getElementById('year').textContent = new Date().getFullYear();

  // PWA Status
  if('serviceWorker' in navigator) {
    document.getElementById('pwa-status').textContent = 'PWA Ready';
  }

  // Memory functions
  let memory = 0;
  function memoryClear(){ memory = 0; showToast('Memory cleared', '‚úÖ'); }
  function memoryRecall(){ 
    const display = document.getElementById('basicDisplay');
    display.value = memory; 
    showToast('Memory recalled: ' + memory, 'üìã');
  }
  function memoryAdd(){ 
    const val = parseFloat(document.getElementById('basicDisplay').value) || 0;
    memory += val; 
    showToast('Added to memory: ' + val, '‚ûï');
  }
  function memorySub(){ 
    const val = parseFloat(document.getElementById('basicDisplay').value) || 0;
    memory -= val; 
    showToast('Subtracted from memory: ' + val, '‚ûñ');
  }

  // Enhanced Calculator with History
  const calculatorHistory = JSON.parse(localStorage.getItem('calcHistory') || '[]');
  function saveToHistory(expression, result) {
    const item = { expression, result, time: new Date().toLocaleTimeString() };
    calculatorHistory.unshift(item);
    if(calculatorHistory.length > 10) calculatorHistory.pop();
    localStorage.setItem('calcHistory', JSON.stringify(calculatorHistory));
    displayHistory();
  }
  
  function displayHistory() {
    const historyDiv = document.getElementById('basicHistory');
    if(calculatorHistory.length === 0) {
      historyDiv.style.display = 'none';
      return;
    }
    historyDiv.style.display = 'block';
    historyDiv.innerHTML = '<div style="font-size:12px;color:var(--muted);margin-bottom:8px;">Calculation History <span class="clear-history" onclick="clearHistory()">Clear</span></div>' +
      calculatorHistory.map(h => `<div class="history-item"><span>${h.expression} = ${h.result}</span><span class="time">${h.time}</span></div>`).join('');
  }
  
  function clearHistory() {
    calculatorHistory.length = 0;
    localStorage.removeItem('calcHistory');
    displayHistory();
    showToast('History cleared', 'üóëÔ∏è');
  }

  // Theme Toggle (Modern Slider)
  const themeToggle = document.getElementById('themeBtn');
  const themeThumb = themeToggle.querySelector('.theme-slider-thumb');
  function toggleTheme() {
    const isDark = document.documentElement.classList.toggle('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    themeToggle.classList.toggle('active', isDark);
    themeThumb.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
    themeToggle.setAttribute('aria-label', isDark ? 'Switch to light mode' : 'Switch to dark mode');
    document.querySelector('meta[name="theme-color"]').setAttribute('content', isDark ? '#1f2937' : '#ffffff');
  }
  // Load saved theme
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    document.documentElement.classList.add('dark');
    themeToggle.classList.add('active');
    themeThumb.textContent = '‚òÄÔ∏è';
  }
  themeToggle.addEventListener('click', toggleTheme);

  // Sidebar Controls
  const sidebar = document.getElementById('sidebar');
  const hambBtn = document.getElementById('hambBtn');
  const closeSidebar = document.getElementById('closeSidebar');
  function openSidebar(){ 
    sidebar.classList.add('open'); 
    sidebar.setAttribute('aria-hidden','false'); 
    closeSidebar.focus(); 
  }
  function closeSB(){ 
    sidebar.classList.remove('open'); 
    sidebar.setAttribute('aria-hidden','true'); 
  }
  hambBtn.addEventListener('click', openSidebar);
  closeSidebar.addEventListener('click', closeSB);
  document.addEventListener('keydown', e => { if(e.key === 'Escape') closeSB(); });
  document.addEventListener('click', e => {
    if(sidebar.classList.contains('open') && !sidebar.contains(e.target) && !hambBtn.contains(e.target)) closeSB();
  });

  // Tabs
  const tabs = Array.from(document.querySelectorAll('.tab'));
  function showTab(id){
    document.querySelectorAll('main section.card').forEach(s => s.hidden = true);
    const el = document.getElementById(id);
    if(el) {
      el.hidden = false;
      el.style.animation = 'none';
      el.offsetHeight; // trigger reflow
      el.style.animation = 'cardIn .42s both';
    }
    tabs.forEach(t => {
      const isActive = t.dataset.target === id;
      t.classList.toggle('active', isActive);
      t.setAttribute('aria-selected', isActive);
    });
    // Update URL hash
    history.replaceState(null, null, `#${id}`);
    // Focus management
    if(el) el.querySelector('h2').focus();
  }
  
  tabs.forEach(t => t.addEventListener('click', ()=> showTab(t.dataset.target)));
  // Handle URL hash
  const hash = window.location.hash.substring(1);
  if(hash && document.getElementById(hash)) {
    showTab(hash);
  } else {
    showTab('basic');
  }

  // Toast Notifications
  function showToast(message, icon = '‚ÑπÔ∏è') {
    const toast = document.getElementById('toast');
    toast.innerHTML = `<span class="icon">${icon}</span><span>${message}</span>`;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 3000);
  }

  // Basic Calculator Functions
  let expr = '';
  const display = document.getElementById('basicDisplay');
  function setText(id,val, type = ''){ 
    const el=document.getElementById(id); 
    if(el) {
      el.textContent = val;
      el.className = 'result ' + type;
    }
  }
  function basicAdd(v){ 
    if(display.value === '0' && v !== '.' ) display.value = ''; 
    expr = display.value + v; 
    display.value = expr; 
    display.focus();
  }
  function basicClear(){ expr=''; display.value='0'; setText('basicRes',''); }
  function basicBack(){ expr = display.value.slice(0,-1); display.value = expr || '0'; }
  function basicEval(){
    if(!display.value) return;
    const safe = display.value.replace(/[^0-9+\-*/().%Esin\cos\tan\g\sqrt\pow\log\PI]/g,'');
    try { 
      const res = Function('"use strict";return ('+safe+')')(); 
      if(isFinite(res)) {
        setText('basicRes', 'Result: ' + res, 'success');
        saveToHistory(display.value, res);
        display.value = String(res);
      } else {
        setText('basicRes','Invalid expression', 'error');
      }
    }
    catch(e){ setText('basicRes','Invalid expression', 'error'); }
  }
  
  document.addEventListener('keydown', e => {
    if(document.activeElement && document.activeElement.tagName === 'INPUT' && document.activeElement.type !== 'text') return;
    if(/^[0-9+\-*/().%]$/.test(e.key)) {
      e.preventDefault();
      basicAdd(e.key);
    }
    if(e.key === 'Enter' || e.key === '=') {
      e.preventDefault();
      basicEval();
    }
    if(e.key === 'Backspace' || e.key === 'Delete') {
      e.preventDefault();
      basicBack();
    }
    if(e.key === 'Escape') {
      e.preventDefault();
      basicClear();
    }
    if(e.key.toLowerCase() === 'm' && e.ctrlKey) {
      e.preventDefault();
      memoryAdd();
    }
    if(e.key === '?' && !e.ctrlKey) {
      e.preventDefault();
      showKeyboardShortcuts();
    }
  });

  // Scientific Calculator
  function sciAdd(v) {
    const display = document.getElementById('sciDisplay');
    if(display.value === '0' && v !== '.') display.value = '';
    if(v === 'sin(' || v === 'cos(' || v === 'tan(' || v === 'sqrt(' || v === 'log(') {
      display.value += v;
    } else if(v === 'PI') {
      display.value += Math.PI;
    } else if(v === 'E') {
      display.value += Math.E;
    } else if(v === 'pow(') {
      display.value += 'Math.pow(';
    } else {
      display.value += v;
    }
    display.focus();
  }
  function sciClear() { document.getElementById('sciDisplay').value = '0'; setText('sciRes',''); }
  function sciEval() {
    const display = document.getElementById('sciDisplay');
    if(!display.value) return;
    try {
      const res = Function('"use strict";return ('+display.value.replace(/sin/g,'Math.sin').replace(/cos/g,'Math.cos').replace(/tan/g,'Math.tan').replace(/sqrt/g,'Math.sqrt').replace(/log/g,'Math.log')+')')();
      if(isFinite(res)) {
        setText('sciRes', 'Result: ' + res.toFixed(6), 'success');
        display.value = String(res);
      } else {
        setText('sciRes','Invalid expression', 'error');
      }
    } catch(e) {
      setText('sciRes','Invalid expression', 'error');
    }
  }

  // Calculator Functions
  function computeAge(){
    const v = document.getElementById('dob').value; 
    if(!v) return setText('ageRes','Please select birthday', 'warning');
    const dob = new Date(v); 
    if(isNaN(dob)) return setText('ageRes','Invalid date', 'error');
    const now = new Date(); 
    let y = now.getFullYear()-dob.getFullYear(); 
    let m = now.getMonth()-dob.getMonth(); 
    let d = now.getDate()-dob.getDate();
    if(d<0){ m--; d += new Date(now.getFullYear(), now.getMonth(), 0).getDate(); } 
    if(m<0){ y--; m += 12; }
    setText('ageRes', `Age: ${y} years, ${m} months, ${d} days`, 'success');
  }
  function clearAge(){ document.getElementById('dob').value=''; setText('ageRes',''); }
  
  function computeBMI(){ 
    const w=parseFloat(document.getElementById('bmiW').value), 
          h=parseFloat(document.getElementById('bmiH').value);
    if(!w||!h) return setText('bmiRes','Enter valid weight and height', 'warning'); 
    const bmi=w/(h*h); 
    let category = '';
    if(bmi < 18.5) category = 'Underweight';
    else if(bmi < 25) category = 'Normal';
    else if(bmi < 30) category = 'Overweight';
    else category = 'Obese';
    setText('bmiRes',`BMI: ${bmi.toFixed(2)} (${category})`, 'success');
  }
  function clearBMI(){ document.getElementById('bmiW').value=''; document.getElementById('bmiH').value=''; setText('bmiRes',''); }
  
  function computeGST(){ 
    const a=parseFloat(document.getElementById('gstAmt').value), 
          r=parseFloat(document.getElementById('gstRate').value);
    if(isNaN(a)||isNaN(r)) return setText('gstRes','Enter amount & rate', 'warning'); 
    const t=a+(a*r/100); 
    setText('gstRes',`Total: ${t.toFixed(2)} | GST Amount: ${(t-a).toFixed(2)}`, 'success');
  }
  function clearGST(){ document.getElementById('gstAmt').value='';document.getElementById('gstRate').value=''; setText('gstRes',''); }
  
  function computeSIP(){ 
    const m=parseFloat(document.getElementById('sipM').value), 
          annual=parseFloat(document.getElementById('sipR').value), 
          years=parseFloat(document.getElementById('sipY').value);
    if(isNaN(m)||isNaN(annual)||isNaN(years)) return setText('sipRes','Enter monthly, rate and years', 'warning'); 
    const r=annual/100/12, n=years*12; 
    const fv=m*((Math.pow(1+r,n)-1)/r)*(1+r); 
    const invested = m * n;
    setText('sipRes',`Future Value: ${fv.toFixed(2)} | Total Invested: ${invested.toFixed(2)} | Gains: ${(fv-invested).toFixed(2)}`, 'success');
  }
  function clearSIP(){ document.getElementById('sipM').value='';document.getElementById('sipR').value='';document.getElementById('sipY').value=''; setText('sipRes',''); }
  
  function computeMort(){ 
    const a=parseFloat(document.getElementById('mortA').value), 
          annual=parseFloat(document.getElementById('mortR').value), 
          years=parseFloat(document.getElementById('mortY').value);
    if(isNaN(a)||isNaN(annual)||isNaN(years)) return setText('mortRes','Enter valid values', 'warning'); 
    const r=annual/100/12, n=years*12; 
    const emi=a*r*(Math.pow(1+r,n)/(Math.pow(1+r,n)-1)); 
    setText('mortRes',`Monthly EMI: ${emi.toFixed(2)} | Total Payment: ${(emi*n).toFixed(2)}`, 'success');
  }
  function clearMort(){ document.getElementById('mortA').value='';document.getElementById('mortR').value='';document.getElementById('mortY').value=''; setText('mortRes',''); }
  
  function computeLoan(){ 
    const p=parseFloat(document.getElementById('loanP').value), 
          annual=parseFloat(document.getElementById('loanR').value), 
          years=parseFloat(document.getElementById('loanY').value);
    if(isNaN(p)||isNaN(annual)||isNaN(years)) return setText('loanRes','Enter valid values', 'warning'); 
    const r=annual/100/12, n=years*12; 
    const emi=p*r*(Math.pow(1+r,n)/(Math.pow(1+r,n)-1)); 
    const total = emi * n;
    const interest = total - p;
    setText('loanRes',`EMI: ${emi.toFixed(2)} | Total: ${total.toFixed(2)} | Interest: ${interest.toFixed(2)}`, 'success');
  }
  function clearLoan(){ document.getElementById('loanP').value='';document.getElementById('loanR').value='';document.getElementById('loanY').value=''; setText('loanRes',''); }
  
  function computeTip(){ 
    const b=parseFloat(document.getElementById('tipBill').value), 
          p=parseFloat(document.getElementById('tipPct').value);
    if(isNaN(b)||isNaN(p)) return setText('tipRes','Enter bill & tip%', 'warning'); 
    const tip=b*p/100;
    const tot=b+tip; 
    setText('tipRes',`Tip Amount: ${tip.toFixed(2)} | Total: ${tot.toFixed(2)}`, 'success');
  }
  function clearTip(){ document.getElementById('tipBill').value='';document.getElementById('tipPct').value=''; setText('tipRes',''); }
  
  function computeDisc(){ 
    const p=parseFloat(document.getElementById('discPrice').value), 
          d=parseFloat(document.getElementById('discPct').value);
    if(isNaN(p)||isNaN(d)) return setText('discRes','Enter price & discount', 'warning'); 
    const f=p-(p*d/100); 
    setText('discRes',`Final Price: ${f.toFixed(2)} | You Save: ${(p-f).toFixed(2)}`, 'success');
  }
  function clearDisc(){ document.getElementById('discPrice').value='';document.getElementById('discPct').value=''; setText('discRes',''); }
  
  function computePct(){ 
    const num=parseFloat(document.getElementById('pctNum').value), 
          pct=parseFloat(document.getElementById('pctOf').value),
          oldV=parseFloat(document.getElementById('pctOld').value),
          newV=parseFloat(document.getElementById('pctNew').value);
    let result = '';
    if(!isNaN(num) && !isNaN(pct)) {
      result += `${pct}% of ${num} = ${(num*pct/100).toFixed(2)} | `;
    }
    if(!isNaN(oldV) && !isNaN(newV)) {
      const change = ((newV-oldV)/oldV)*100;
      result += `Change: ${change.toFixed(2)}% | `;
    }
    if(result) setText('pctRes', result.slice(0,-3), 'success');
    else setText('pctRes','Enter values', 'warning');
  }
  function clearPct(){ document.getElementById('pctNum').value='';document.getElementById('pctOf').value='';document.getElementById('pctOld').value='';document.getElementById('pctNew').value=''; setText('pctRes',''); }
  
  function computeProfit(){ 
    const cost=parseFloat(document.getElementById('profitCost').value), 
          sell=parseFloat(document.getElementById('profitSell').value),
          margin=parseFloat(document.getElementById('profitMargin').value);
    let result = '';
    if(!isNaN(cost) && !isNaN(sell)) {
      const profit = sell - cost;
      const marginPct = (profit/cost)*100;
      result += `Profit: ${profit.toFixed(2)} | Margin: ${marginPct.toFixed(2)}% | `;
    }
    if(!isNaN(cost) && !isNaN(margin)) {
      const sellPrice = cost + (cost*margin/100);
      result += `Sell Price: ${sellPrice.toFixed(2)}`;
    }
    if(result) setText('profitRes', result, 'success');
    else setText('profitRes','Enter values', 'warning');
  }
  function clearProfit(){ document.getElementById('profitCost').value='';document.getElementById('profitSell').value='';document.getElementById('profitMargin').value=''; setText('profitRes',''); }
  
  function computeTime(){ 
    const h=parseInt(document.getElementById('timeH').value)||0, 
          m=parseInt(document.getElementById('timeM').value)||0,
          addH=parseInt(document.getElementById('timeAddH').value)||0,
          addM=parseInt(document.getElementById('timeAddM').value)||0;
    const totalM = m + addM;
    const carryH = Math.floor(totalM/60);
    const finalM = totalM % 60;
    const finalH = h + addH + carryH;
    setText('timeRes',`Result: ${finalH} hours ${finalM} minutes | Total: ${finalH*60+finalM} minutes`, 'success');
  }
  function clearTime(){ document.getElementById('timeH').value='';document.getElementById('timeM').value='';document.getElementById('timeAddH').value='';document.getElementById('timeAddM').value=''; setText('timeRes',''); }
  
  function computeData(){ 
    const val=parseFloat(document.getElementById('dataValue').value);
    const unit=document.getElementById('dataUnit').value;
    if(isNaN(val)) return setText('dataRes','Enter value', 'warning');
    const bytes = unit === 'B' ? val : unit === 'KB' ? val*1024 : unit === 'MB' ? val*1024*1024 : unit === 'GB' ? val*1024*1024*1024 : val*1024*1024*1024*1024;
    const kb = bytes/1024;
    const mb = kb/1024;
    const gb = mb/1024;
    const tb = gb/1024;
    setText('dataRes',`${val} ${unit} = ${kb.toFixed(2)} KB = ${mb.toFixed(2)} MB = ${gb.toFixed(2)} GB = ${tb.toFixed(5)} TB`, 'success');
  }
  function clearData(){ document.getElementById('dataValue').value=''; setText('dataRes',''); }

  // Currency Converter (simplified with approximate rates)
  function convertCurrency() {
    const amt=parseFloat(document.getElementById('curAmt').value);
    const from=document.getElementById('curFrom').value;
    const to=document.getElementById('curTo').value;
    if(isNaN(amt)) return setText('curRes','Enter amount', 'warning');
    
    // Approximate rates (1 USD = x units)
    const rates = {
      USD: 1, EUR: 0.85, GBP: 0.73, INR: 74.5, JPY: 110, AUD: 1.35, CAD: 1.25
    };
    
    const usd = amt / rates[from];
    const result = usd * rates[to];
    setText('curRes',`${amt} ${from} = ${result.toFixed(2)} ${to} (Approx.)`, 'success');
  }
  function clearCurrency() { document.getElementById('curAmt').value='100'; setText('curRes',''); }

  // Unit Converter
  const unitConversions = {
    length: {m:1, km:1000, cm:0.01, mm:0.001, in:0.0254, ft:0.3048, mi:1609.34, yd:0.9144},
    weight: {kg:1, g:0.001, mg:0.000001, lb:0.453592, oz:0.0283495, ton:1000},
    temperature: {C:1, F:1, K:1}
  };
  
  function updateUnitOptions() {
    const type = document.getElementById('unitType').value;
    const fromSelect = document.getElementById('unitFrom');
    const toSelect = document.getElementById('unitTo');
    const units = Object.keys(unitConversions[type]);
    fromSelect.innerHTML = units.map(u => `<option value="${u}">${u.toUpperCase()}</option>`).join('');
    toSelect.innerHTML = units.map(u => `<option value="${u}">${u.toUpperCase()}</option>`).join('');
    toSelect.selectedIndex = 1;
  }
  updateUnitOptions();
  
  function convertUnit() {
    const val=parseFloat(document.getElementById('unitValue').value);
    const type=document.getElementById('unitType').value;
    const from=document.getElementById('unitFrom').value;
    const to=document.getElementById('unitTo').value;
    if(isNaN(val)) return setText('unitRes','Enter value', 'warning');
    
    let result;
    if(type === 'temperature') {
      if(from === 'C' && to === 'F') result = (val * 9/5) + 32;
      else if(from === 'C' && to === 'K') result = val + 273.15;
      else if(from === 'F' && to === 'C') result = (val - 32) * 5/9;
      else if(from === 'F' && to === 'K') result = (val - 32) * 5/9 + 273.15;
      else if(from === 'K' && to === 'C') result = val - 273.15;
      else if(from === 'K' && to === 'F') result = (val - 273.15) * 9/5 + 32;
      else result = val;
    } else {
      const base = val * unitConversions[type][from];
      result = base / unitConversions[type][to];
    }
    setText('unitRes',`${val} ${from} = ${result.toFixed(6)} ${to}`, 'success');
  }
  function clearUnit() { document.getElementById('unitValue').value=''; setText('unitRes',''); }

  // Keyboard shortcuts help
  function showKeyboardShortcuts() {
    showToast('Shortcuts: Enter=Calculate, Esc=Clear, ‚å´=Backspace, M+=Memory, ?=Help', '‚å®Ô∏è');
  }

  // Print and Save shortcuts
  document.addEventListener('keydown', e => {
    if(e.ctrlKey && e.key === 'p') {
      e.preventDefault();
      const activeCard = document.querySelector('section.card:not([hidden])');
      if(activeCard) {
        const result = activeCard.querySelector('.result').textContent;
        const title = activeCard.querySelector('h2').textContent;
        const printWindow = window.open('', '', 'width=600,height=400');
        printWindow.document.write(`<h1>${title}</h1><p>${result}</p><p>Generated by Calculator By PirateRuler.com</p>`);
        printWindow.document.close();
        printWindow.print();
      }
    }
    if(e.ctrlKey && e.key === 's') {
      e.preventDefault();
      const activeCard = document.querySelector('section.card:not([hidden])');
      if(activeCard) {
        const result = activeCard.querySelector('.result').textContent;
        const title = activeCard.querySelector('h2').textContent;
        const blob = new Blob([`${title}\n${result}\n\nCalculator By PirateRuler.com`], {type: 'text/plain'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `calculation-${Date.now()}.txt`;
        a.click();
        URL.revokeObjectURL(url);
        showToast('Result saved', 'üíæ');
      }
    }
  });

  // Display history on load
  displayHistory();

  // Service worker registration (commented out - enable for offline support)
  /*
  if('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js').then(reg => {
      console.log('SW registered:', reg);
    }).catch(err => console.log('SW error:', err));
  }
  */
</script>
</body>
</html>
